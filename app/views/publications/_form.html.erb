<%= content_for :javascript_includes do%>
	<%= javascript_include_tag 'dropload.js' %>
	<%= javascript_include_tag 'publications_form.js' %>
<% end %>

<!--<%= setup_upload %>-->

<div class='row-fluid'>
	<div id='dropbar_holder' class='span12'></div>
</div>

<%= form_for(@publication, :remote => true, :method => :post, :html => {'data-type' => 'json'}) do |f|%>
	<div class='row-fluid'>
		<div class='field span12'>
			<%= f.label :name, "Title" %>
			<input id="publication_name" name="publication[name]" size="30" type="text" class='span12' required>
		</div>

	</div>

	<div class='row-fluid'>
		<div class='field span4'>
				<%= f.label :url, "URL" %>
				<input id="publication_url" name="publication[url]" size="30" type="text", class='span12'>
		</div>

		<div class='field span4'>
				<%= f.label :venue, "Journal or Conference" %>
				<input id="publication_venue" name="publication[venue]" size="30" type="text", class='span12'>
		</div>

		<div class='field span4'>
				<%= f.label :pubdate, "Publication Date" %>
				<input id="publication_pubdate" name="publication[pubdate]" size="30" type="text", class='span12'>
		</div>

	</div>

	<div class='row-fluid'>
		<div class='field span4'>
			<%= f.label :description %>
			<%= f.text_area :description, :class => 'big_desc span12' %>
		</div>

		<div class='field span4'>
			<%= f.label :keywords %>
			<div class='input-prepend'>
				<span class="add-on"><i class="icon-tags"></i></span>
				<%= f.autocomplete_field :keyword, '/publications/autocomplete_publication_keyword_name', :value => "", :class => 'memberInput span11', :id => 'keyword_in' %>
			</div>
			<br/>
			<div class='span12' id='keywords_holder'>
			</div>
		</div>

		<div class='field span4'>
			<%= f.label :authors, "Authors" %>
			<%= f.text_area :authors, :class => 'big_desc span12' %>
		</div>

	</div>

	<div class='row-fluid'>

		<div class='field span4'>
			<%= f.label :citation, "BibTex" %>
			<%= f.text_area :citation, :class => 'big_desc span12' %>
		</div>

		<div class="field span4">
			<label for="corpus">Uses Corpus</label>

			<div class='input-prepend'>
			<% if @corpus %>
				<span class="add-on"><i class="icon-book"></i></span>
				<%= f.autocomplete_field :corpus, '/corpora/autocomplete_corpus_name', :value => @corpus.ac_small_format, :class => 'memberInput span11', :id => 'primaryOwner' %>
			<% else %>
				<span class="add-on"><i class="icon-book"></i></span>
				<%= f.autocomplete_field :corpus, '/corpora/autocomplete_corpus_name', :value => "", :class => 'memberInput span11', :id => 'primaryOwner' %>
			<% end %>
			</div>

			<br/><br/>
			
			
		</div>

		<div class='field span4'>

			<label for='owners'>Primary Owner</label>

			<div class="input-prepend">
				<span class="add-on"><i class="icon-user"></i></span>
				<%= f.autocomplete_field :owner, '/corpora/autocomplete_user_name', :value => current_user().email_format, :class => 'memberInput span11', :id => 'primaryOwner' %> 
			</div>
			<br/>

			<!--
			<label>New External Members?</label>
			<a href='/user/invite' class='btn span12' target="_blank">Invite a Friend</a>
			-->
			<%= render :partial => 'shared/dropbox2', :locals => {:text => "Drop Document Anywhere On This Page"} %>
			

			
		</div>

	</div>

	<br/>
	<input type='submit' class='btn btn-small btn-primary span12' value="Create Publication"/>
<% end %>